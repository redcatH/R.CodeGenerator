# 后置命令执行功能说明

## 功能介绍

在 API 代码生成完成后，支持自动执行自定义命令，常用于：
- 代码格式化（如 `npm run format`、`prettier --write .`）
- Git 操作（如 `git add .`、`git commit -m "update api"`）
- 编译检查（如 `npm run type-check`）
- 其他自定义脚本

## 配置参数

在 `config.json` 中添加以下配置：

```json
{
  "EnablePostGenerationCommand": true,
  "CommandWorkingDirectory": "vue-vben-admin",
  "Command": "npm run format",
  "CommandArguments": "",
  "CommandTimeoutMs": 60000,
  "WaitForCommandCompletion": true
}
```

### 参数说明

- **EnablePostGenerationCommand**: 是否启用后置命令执行（默认：false）
- **CommandWorkingDirectory**: 执行命令的工作目录，可以是相对路径或绝对路径（可选）
- **Command**: 要执行的命令（必填，当启用时）
- **CommandArguments**: 命令的额外参数（可选）
- **CommandTimeoutMs**: 命令执行超时时间，单位毫秒，0表示无限制（默认：30000）
- **WaitForCommandCompletion**: 是否等待命令执行完成（默认：true）

## 使用示例

### 1. 代码格式化
```json
{
  "EnablePostGenerationCommand": true,
  "CommandWorkingDirectory": "vue-vben-admin",
  "Command": "npm run format",
  "CommandTimeoutMs": 60000,
  "WaitForCommandCompletion": true
}
```

### 2. Prettier 格式化指定目录
```json
{
  "EnablePostGenerationCommand": true,
  "CommandWorkingDirectory": "vue-vben-admin",
  "Command": "npx prettier --write",
  "CommandArguments": "apps/web-ele/src/api",
  "CommandTimeoutMs": 30000,
  "WaitForCommandCompletion": true
}
```

### 3. Git 自动提交
```json
{
  "EnablePostGenerationCommand": true,
  "CommandWorkingDirectory": "vue-vben-admin",
  "Command": "git add . && git commit -m \"update api code\"",
  "CommandTimeoutMs": 15000,
  "WaitForCommandCompletion": true
}
```

### 4. 类型检查
```json
{
  "EnablePostGenerationCommand": true,
  "CommandWorkingDirectory": "vue-vben-admin",
  "Command": "npm run type-check",
  "CommandTimeoutMs": 120000,
  "WaitForCommandCompletion": true
}
```

### 5. 后台执行（不等待完成）
```json
{
  "EnablePostGenerationCommand": true,
  "CommandWorkingDirectory": "vue-vben-admin",
  "Command": "npm run dev",
  "WaitForCommandCompletion": false
}
```

## 注意事项

1. **跨平台兼容性**: 程序会自动检测操作系统，在 Windows 下使用 `cmd.exe`，在 Linux/macOS 下使用 `/bin/bash`
2. **工作目录**: 如果未指定工作目录，将使用程序当前目录
3. **错误处理**: 如果命令执行失败，会显示错误信息但不会中断程序
4. **超时处理**: 如果命令执行超时，进程会被强制终止
5. **输出显示**: 命令的标准输出和错误输出都会显示在控制台中

## 常见用法场景

- **开发环境**: 生成代码后自动格式化，确保代码风格一致
- **CI/CD**: 生成代码后自动运行测试或类型检查
- **版本控制**: 自动提交生成的代码到 Git
- **构建流程**: 生成代码后触发构建或部署流程

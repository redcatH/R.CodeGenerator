# 模板路径配置功能说明

## 功能介绍

现在支持通过配置文件指定 API 生成模板的路径，不再固定使用 `templates/api_service_vben.sbn`。

## 配置参数

在 `config.json` 中添加 `TemplatePath` 配置：

```json
{
  "TemplatePath": "Templates/api_service_vben.sbn"
}
```

### 参数说明

- **TemplatePath**: API 模板文件路径
  - 支持相对路径（相对于程序运行目录）
  - 支持绝对路径
  - 默认值：`"Templates/api_service_vben.sbn"`

## 使用示例

### 1. 使用相对路径（推荐）
```json
{
  "TemplatePath": "Templates/api_service_vben.sbn"
}
```

### 2. 使用绝对路径
```json
{
  "TemplatePath": "D:\\MyProject\\Templates\\custom_api_template.sbn"
}
```

### 3. 使用不同的模板文件
```json
{
  "TemplatePath": "Templates/api_service_custom.sbn"
}
```

### 4. 项目内模板路径
```json
{
  "TemplatePath": "src/CodeGen/Templates/api_template.sbn"
}
```

## 完整配置示例

```json
{
  "OutputDir": "vue-vben-admin\\apps\\web-ele\\src\\api\\business_api",
  "TypesDir": "vue-vben-admin\\apps\\web-ele\\src\\api\\types",
  "ImportLine": [""],
  "NamespacePrefix": "VividCMS",
  "UnwrapGenericTypes": ["VbenResult"],
  "UseInterface": true,
  "TemplatePath": "Templates/api_service_vben.sbn",
  "EnablePostGenerationCommand": true,
  "CommandWorkingDirectory": "vue-vben-admin",
  "Command": "pnpm fix:path \"src/api/**/*.ts\"",
  "CommandTimeoutMs": 60000,
  "WaitForCommandCompletion": true
}
```

## 注意事项

1. **文件存在性检查**: 程序启动时会检查模板文件是否存在，如果不存在会抛出异常
2. **路径解析**: 相对路径会基于程序运行目录进行解析
3. **模板格式**: 模板文件必须是有效的 Scriban 模板格式
4. **编码要求**: 模板文件应使用 UTF-8 编码

## 自定义模板

你可以基于现有的 `api_service_vben.sbn` 模板创建自定义模板：

1. 复制现有模板文件
2. 根据需要修改模板内容
3. 在配置文件中指定新的模板路径

例如创建一个简化版本的模板：

```plaintext
// CustomTemplates/simple_api.sbn
const {{ service_name }} = {
{{~ for api in apis ~}}
  {{ api.action_name }}: ({{ api.param_list }}) => {
    return request<{{ api.return_type }}>({
      url: `{{ api.path }}`,
      method: '{{ api.http_method }}',
    });
  },
{{~ end ~}}
};

export default {{ service_name }};
```

然后在配置中使用：

```json
{
  "TemplatePath": "CustomTemplates/simple_api.sbn"
}
```

## 错误处理

如果模板文件不存在，程序会显示类似以下的错误信息：

```
模板文件未找到: D:\MyProject\Templates\missing_template.sbn
```

确保模板文件路径正确且文件确实存在。
